/* Reset base e stile generale */
body {
    margin: 0;
    padding: 0;
    font-family: sans-serif;
    background-color: #1a1a1a;
    color: #e0e0e0;
    display: flex;
    /* Cambiato: Centra il contenitore principale orizzontalmente */
    justify-content: center;
    align-items: center; /* Centra verticalmente se il contenuto è minore dell'altezza */
    min-height: 100vh;
    overflow-x: auto; /* Permette scroll orizzontale se necessario */
}

/* Contenitore Principale Orizzontale */
.game-container {
    width: 98%; /* Quasi tutta la larghezza */
    /* Altezza fissa o max-height potrebbe essere necessaria */
    height: 95vh; /* Esempio: occupa gran parte dell'altezza viewport */
    margin-top: 10px;
    margin-bottom: 10px;
    display: flex;
    /* Cambiato: Layout Orizzontale */
    flex-direction: row;
    border: 1px solid #444;
    background-color: #222;
}

/* Area Centrale (Controlli/Turno) - Posizionata sopra */
/* Modifica: La rimuoviamo da qui, la inseriremo DENTRO le player-area o tra di esse in HTML */
/* .center-area { ... } */


/* Aree Giocatore (Sinistra/Destra) */
.player-area {
    /* Cambiato: Larghezza divisa (meno un po' per gap) */
    flex-basis: 48%; /* Occupa quasi metà spazio */
    flex-grow: 1;
    height: 100%; /* Occupa tutta l'altezza del contenitore */
    padding: 10px;
    /* Cambiato: Layout interno Verticale */
    display: flex;
    flex-direction: column;
    border: none; /* Rimosso bordo inferiore */
    border-right: 1px solid #444; /* Bordo tra i giocatori */
    overflow-y: hidden; /* Nasconde overflow verticale interno per ora */
}
.player-area:last-child {
    border-right: none; /* Nessun bordo a destra dell'ultimo */
}
/* Evidenzia giocatore attivo (stile mantenuto) */
.player-area.active-turn {
    outline: 3px solid gold;
    box-shadow: 0 0 15px gold;
}

/* Struttura interna Player Area */
.player-main-content {
    flex-grow: 1; /* Occupa lo spazio rimanente */
    display: flex;
    flex-direction: row; /* Campo a fianco di Mano/Deck */
    gap: 10px;
    overflow: hidden; /* Evita overflow */
    height: calc(100% - 100px); /* Altezza meno spazio per info/controlli */
}

.player-controls-info {
     /* Altezza fissa per info e controlli in basso/alto */
    height: 90px;
    padding: 5px 0;
    border-top: 1px dashed #444; /* Separatore */
    margin-top: 10px;
    display: flex;
    flex-direction: column; /* Info sopra, controlli sotto */
    justify-content: space-around;
}


/* Informazioni Giocatore (semplificate) */
.player-info {
    display: flex;
    flex-wrap: wrap;
    gap: 10px; /* Ridotto gap */
    font-size: 0.9em; /* Ridotto font size */
    color: #aaa;
    padding-bottom: 5px;
    border-bottom: none; /* Rimosso bordo */
    margin-bottom: 5px;
}
.player-info span {
    background-color: #333;
    padding: 2px 5px;
    border-radius: 3px;
}

/* Controlli Giocatore (Turno/Log) - Messo qui */
.player-game-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
}
/* Stili bottoni (show-log, end-turn) rimangono validi */
#show-log-button { padding: 5px 10px; font-size: 0.8em; }
#end-turn-button { padding: 8px 15px; font-size: 1em; }
.turn-indicator-area { font-size: 0.9em; }


/* Zona Mano / Deck / Cimitero (Verticale) */
.hand-deck-graveyard-zone {
    display: flex;
    flex-direction: column;
    gap: 10px;
    flex-basis: 230px; /* Larghezza fissa per contenere carte grandi */
    flex-shrink: 0; /* Non restringere */
    overflow-y: auto; /* Scroll se mano troppo grande */
    padding-right: 5px; /* Spazio per scrollbar */
}

/* Mano */
.hand {
    display: flex;
    /* Cambiato: Carte in colonna */
    flex-direction: column;
    flex-wrap: nowrap; /* No a capo */
    gap: 8px;
    min-height: auto; /* Altezza si adatta */
    padding: 5px;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
    margin-bottom: 0; /* Rimosso margine */
    align-items: center; /* Centra le carte orizzontalmente */
    flex-grow: 1; /* Occupa spazio verticale */
    overflow-y: auto; /* Scroll interno se serve */
}
.opponent-area .hand {
    /* Stile per mano avversario (placeholder) */
    background-color: rgba(50, 50, 50, 0.3);
}


/* Deck e Cimitero (Affiancati in basso) */
.deck-graveyard {
    display: flex;
    flex-direction: row; /* Affiancati */
    justify-content: space-around; /* Spaziati */
    gap: 10px;
    margin-top: auto; /* Spinge in fondo alla colonna */
    flex-shrink: 0; /* Non restringere */
}

.deck, .graveyard {
    /* Ridimensionati leggermente */
    width: 100px;
    height: 140px;
    border: 2px solid #666;
    font-size: 0.8em; /* Ridotto */
    border-radius: 7px; /* Ridotto */
    /* Stili rimanenti invariati */
    background-color: #3a3a3a; color: #ccc; display: flex; justify-content: center; align-items: center; text-align: center; cursor: pointer; transition: background-color 0.2s ease, border-color 0.2s ease, opacity 0.3s ease;
}
.deck:hover, .graveyard:hover { background-color: #4a4a4a; border-color: #999; }
.deck.deck-inactive, .graveyard.graveyard-inactive { cursor: default; opacity: 0.6; }
.deck.deck-inactive:hover, .graveyard.graveyard-inactive:hover { background-color: #3a3a3a; border-color: #666; }


/* Campo di Battaglia (GRID) */
.field {
    flex-grow: 1; /* Occupa spazio rimanente orizzontale */
    min-height: auto; /* Altezza definita da righe grid */
    padding: 5px;
    background-color: rgba(10, 10, 10, 0.3); /* Sfondo campo diverso */
    border-radius: 4px;
    margin-bottom: 0;

    /* === GRID DEFINITION === */
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3 colonne uguali */
    grid-template-rows: repeat(6, 1fr); /* 6 righe uguali */
    gap: 5px; /* Spazio tra le celle */
    border: 1px solid #777; /* Bordo per il campo */
    overflow: auto; /* Scroll se griglia esce */
    align-content: start; /* Allinea righe all'inizio */
}

/* Stile Celle della Griglia */
.grid-cell {
    border: 1px dashed #555; /* Bordi celle visibili per debug */
    border-radius: 8px;
    min-height: 150px; /* Altezza minima cella (adattabile) */
    /* Centra la carta dentro la cella */
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative; /* Per posizionare indicatori/effetti */
    background-color: rgba(255, 255, 255, 0.02); /* Sfondo cella leggero */
}
/* Stile cella quando è una possibile destinazione (es. piazzamento) */
.grid-cell.placement-valid {
    background-color: rgba(0, 255, 0, 0.1);
    border-style: solid;
    border-color: limegreen;
    cursor: pointer;
}
.grid-cell.placement-valid:hover {
    background-color: rgba(0, 255, 0, 0.2);
}


/* Stile Carte (Originale per Mano/Modali) */
.card {
    width: 210px; height: 300px; border: 2px solid #888; background-color: #555; color: #fff; border-radius: 10px; display: flex; flex-direction: column; justify-content: space-between; font-size: 1em; padding: 8px; box-sizing: border-box; position: relative; cursor: pointer; overflow: hidden; transition: transform 0.1s ease-in-out, box-shadow 0.2s ease;
}
.card:hover { border-color: #eee; box-shadow: 0 0 12px rgba(255, 255, 255, 0.6); transform: scale(1.03); }
.card .card-name { font-weight: bold; font-size: 1.1em; white-space: normal; margin-bottom: 5px; }
.card .card-cost { position: absolute; top: 8px; right: 8px; background-color: rgba(0, 0, 0, 0.7); border-radius: 50%; width: 30px; height: 30px; display: flex; justify-content: center; align-items: center; font-size: 1.1em; font-weight: bold; border: 1px solid #ccc; }
.card .card-stats { display: flex; justify-content: space-around; font-size: 1.2em; font-weight: bold; background-color: rgba(0, 0, 0, 0.7); padding: 4px 8px; border-radius: 5px; margin-top: 5px; }
.card .card-art { position: absolute; top: 45px; left: 8px; right: 8px; bottom: 45px; background-color: #777; background-size: cover; background-position: center; border-radius: 5px; }
.card .card-art.card-art-fallback { background-image: none !important; background-color: #666; display: flex; align-items: center; justify-content: center; text-align: center; font-size: 0.9em; color: #ccc; padding: 5px; }
.card .card-ability { display: none; }

/* NUOVO: Stile Carte sulla Griglia (più piccole) */
.card.on-grid {
    width: 90%; /* Occupa gran parte della cella */
    height: 90%; /* Occupa gran parte della cella */
    max-width: 120px; /* Limite dimensione */
    max-height: 170px; /* Limite dimensione */
    font-size: 0.7em; /* Font più piccolo */
    padding: 4px;
    border-radius: 6px; /* Raggio ridotto */
    border-width: 1px;
    position: static; /* Rimuove position absolute dal costo */
    cursor: default; /* Cursore normale sulla griglia (a meno che non sia bersaglio) */
}
.card.on-grid:hover {
     transform: none; /* No scale hover sulla griglia */
     box-shadow: 0 0 8px rgba(255, 255, 255, 0.4); /* Ombra ridotta */
}
.card.on-grid .card-cost {
    /* Posizionamento relativo per costo sulla griglia */
    position: relative;
    top: auto;
    right: auto;
    width: 20px; height: 20px;
    font-size: 0.9em;
    align-self: flex-end; /* Allinea a destra */
    margin-top: -22px; /* Sovrapponi leggermente al nome */
    margin-right: -2px;
    border: none;
}
.card.on-grid .card-name { font-size: 1em; margin-bottom: 2px;}
.card.on-grid .card-art {
    position: static; /* Rimuovi posizionamento assoluto */
    height: 60%; /* Altezza relativa per l'arte */
    margin-top: 2px; margin-bottom: 2px;
}
.card.on-grid .card-stats { font-size: 1em; padding: 2px 4px; }


/* Placeholder mano avversario (dimensioni originali) */
.card-placeholder { width: 210px; height: 300px; background-color: #404040; border-style: dashed; cursor: default; }
.card-placeholder:hover { border-color: #888; box-shadow: none; transform: none; }

/* Modali (Stili base rimangono validi) */
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.7); justify-content: center; align-items: center; }
.modal.active { display: flex; }
.modal-content { background-color: #2d2d2d; margin: auto; padding: 20px; border: 1px solid #888; border-radius: 5px; position: relative; color: #e0e0e0; width: 80%; max-height: 85vh; display: flex; flex-direction: column; }
.modal-content .close-button { color: #aaa; position: absolute; top: 10px; right: 15px; font-size: 28px; font-weight: bold; cursor: pointer; line-height: 1; }
.modal-content .close-button:hover, .modal-content .close-button:focus { color: #fff; text-decoration: none; }
/* Modale Cimitero (carte più piccole qui) */
#modal-body-graveyard { margin-top: 15px; max-height: calc(85vh - 70px); overflow-y: auto; display: flex; flex-wrap: wrap; gap: 10px; /* Ridotto gap */ justify-content: center; }
#modal-body-graveyard .card { width: 105px !important; height: 150px !important; /* Dimensioni fisse per cimitero */ font-size: 0.7em !important; cursor: default !important; border-color: #666; transform: none !important; }
#modal-body-graveyard .card:hover { box-shadow: none; }
/* Modale Log */
#log-modal .modal-content { max-width: 800px; }
#modal-body-log { margin-top: 15px; max-height: calc(85vh - 70px); overflow-y: scroll; background-color: #111; border: 1px solid #333; border-radius: 4px; padding: 10px; font-size: 0.9em; color: #bbb; line-height: 1.4; }
#modal-body-log p { margin: 0 0 8px 0; padding: 0; border-bottom: 1px dotted #333; padding-bottom: 5px; }
#modal-body-log p:last-child { border-bottom: none; }
#modal-body-log p .log-timestamp { color: #888; margin-right: 5px; }

/* Highlight Target */
.potential-target { /* Si applica a carte o celle */
    outline: 3px solid yellow; /* Ridotto leggermente */
    box-shadow: 0 0 12px yellow; /* Ridotto leggermente */
    cursor: crosshair !important;
    /* border-radius: 12px; -- Rimosso, usa il radius dell'elemento base */
}
.potential-target:hover {
    /* Rimosso scale hover per target, potrebbe essere fastidioso sulla griglia */
    /* transform: scale(1.05) !important; */
    background-color: rgba(255, 255, 0, 0.1); /* Aggiunge sfondo giallo leggero su hover target */
}